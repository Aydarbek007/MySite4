<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Денежная рулетка</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            width: 100%;
            border-bottom: 2px solid #2d4059;
        }
        
        h1 {
            font-size: 2.8rem;
            background: linear-gradient(to right, #ff9a00, #ff5e00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        .subtitle {
            color: #b8c1cc;
            font-size: 1.2rem;
        }
        
        .game-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            width: 100%;
            margin-bottom: 30px;
        }
        
        .roulette-section {
            flex: 1;
            min-width: 300px;
            max-width: 600px;
            background: rgba(25, 25, 40, 0.8);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .controls-section {
            flex: 1;
            min-width: 300px;
            max-width: 500px;
            background: rgba(25, 25, 40, 0.8);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .section-title {
            font-size: 1.5rem;
            color: #4cc9f0;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #2d4059;
        }
        
        .roulette-wheel {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 0 auto 30px;
        }
        
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                #e74c3c 0deg 30deg,
                #2ecc71 30deg 60deg,
                #3498db 60deg 90deg,
                #f1c40f 90deg 120deg,
                #9b59b6 120deg 150deg,
                #1abc9c 150deg 180deg,
                #e67e22 180deg 210deg,
                #e74c3c 210deg 240deg,
                #2ecc71 240deg 270deg,
                #3498db 270deg 300deg,
                #f1c40f 300deg 330deg,
                #9b59b6 330deg 360deg
            );
            position: relative;
            transition: transform 3s cubic-bezier(0.2, 0.8, 0.3, 1);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }
        
        .wheel-center {
            position: absolute;
            width: 40px;
            height: 40px;
            background: #1a1a2e;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
        }
        
        .pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 40px;
            background: #ff9a00;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            z-index: 3;
        }
        
        .wheel-numbers {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            z-index: 1;
        }
        
        .wheel-number {
            position: absolute;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
            transform-origin: center;
        }
        
        .bet-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .bet-option {
            background: #2d4059;
            border: none;
            border-radius: 8px;
            padding: 15px 10px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .bet-option:hover {
            background: #3a506b;
            transform: translateY(-3px);
        }
        
        .bet-option.active {
            background: linear-gradient(to right, #ff9a00, #ff5e00);
            box-shadow: 0 5px 15px rgba(255, 94, 0, 0.4);
        }
        
        .bet-amount {
            font-size: 0.9rem;
            color: #b8c1cc;
            margin-top: 5px;
        }
        
        .player-info {
            display: flex;
            justify-content: space-between;
            background: rgba(45, 64, 89, 0.5);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
        }
        
        .balance, .current-bet {
            text-align: center;
        }
        
        .value {
            font-size: 2rem;
            font-weight: bold;
            color: #4cc9f0;
        }
        
        .label {
            color: #b8c1cc;
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .bet-slider {
            width: 100%;
            margin: 10px 0;
        }
        
        .bet-amount-display {
            text-align: center;
            font-size: 1.2rem;
            margin: 10px 0;
        }
        
        .spin-button {
            background: linear-gradient(to right, #ff9a00, #ff5e00);
            border: none;
            border-radius: 10px;
            padding: 18px;
            color: white;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .spin-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 94, 0, 0.3);
        }
        
        .spin-button:disabled {
            background: #555;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .history {
            margin-top: 25px;
        }
        
        .history-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .history-list {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .history-item {
            background: rgba(45, 64, 89, 0.7);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.9rem;
        }
        
        .win {
            color: #2ecc71;
        }
        
        .loss {
            color: #e74c3c;
        }
        
        .result-message {
            text-align: center;
            padding: 15px;
            margin: 20px 0;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.2rem;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(45, 64, 89, 0.5);
        }
        
        .rules {
            max-width: 800px;
            margin-top: 30px;
            background: rgba(25, 25, 40, 0.8);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        .rules h3 {
            color: #4cc9f0;
            margin-bottom: 15px;
        }
        
        .rules ul {
            padding-left: 20px;
            line-height: 1.6;
        }
        
        .rules li {
            margin-bottom: 10px;
        }
        
        footer {
            margin-top: 40px;
            text-align: center;
            color: #b8c1cc;
            font-size: 0.9rem;
            padding-top: 20px;
            border-top: 1px solid #2d4059;
            width: 100%;
        }
        
        @media (max-width: 768px) {
            .game-container {
                flex-direction: column;
                align-items: center;
            }
            
            .roulette-section, .controls-section {
                max-width: 100%;
            }
            
            h1 {
                font-size: 2.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-dice"></i> Денежная Рулетка</h1>
            <p class="subtitle">Испытайте удачу и выигрывайте виртуальные деньги!</p>
        </header>
        
        <div class="game-container">
            <section class="roulette-section">
                <h2 class="section-title">Колесо Рулетки</h2>
                <div class="roulette-wheel">
                    <div class="pointer"></div>
                    <div class="wheel" id="wheel">
                        <div class="wheel-center"></div>
                    </div>
                </div>
                
                <div class="result-message" id="resultMessage">
                    Сделайте ставку и запустите рулетку!
                </div>
                
                <div class="bet-options">
                    <div class="bet-option" data-bet="100">
                        <span>Красное</span>
                        <span class="bet-amount">x2</span>
                    </div>
                    <div class="bet-option" data-bet="100">
                        <span>Зеленое</span>
                        <span class="bet-amount">x14</span>
                    </div>
                    <div class="bet-option" data-bet="100">
                        <span>Черное</span>
                        <span class="bet-amount">x2</span>
                    </div>
                    <div class="bet-option" data-bet="100">
                        <span>1-4</span>
                        <span class="bet-amount">x3</span>
                    </div>
                    <div class="bet-option" data-bet="100">
                        <span>5-8</span>
                        <span class="bet-amount">x3</span>
                    </div>
                    <div class="bet-option" data-bet="100">
                        <span>9-12</span>
                        <span class="bet-amount">x3</span>
                    </div>
                </div>
            </section>
            
            <section class="controls-section">
                <h2 class="section-title">Управление игрой</h2>
                
                <div class="player-info">
                    <div class="balance">
                        <div class="value" id="balance">5000</div>
                        <div class="label">Ваш баланс</div>
                    </div>
                    <div class="current-bet">
                        <div class="value" id="currentBet">0</div>
                        <div class="label">Текущая ставка</div>
                    </div>
                </div>
                
                <div class="controls">
                    <div>
                        <label for="betSlider">Размер ставки:</label>
                        <input type="range" id="betSlider" class="bet-slider" min="100" max="1000" step="100" value="100">
                        <div class="bet-amount-display">
                            Ставка: <span id="betValue">100</span> монет
                        </div>
                    </div>
                    
                    <button class="spin-button" id="spinButton">
                        <i class="fas fa-play"></i> Крутить рулетку
                    </button>
                </div>
                
                <div class="history">
                    <div class="history-title">
                        <h3>История игр</h3>
                        <span id="clearHistory">Очистить</span>
                    </div>
                    <div class="history-list" id="historyList">
                        <!-- История будет добавляться динамически -->
                    </div>
                </div>
            </section>
        </div>
        
        <section class="rules">
            <h3>Правила игры</h3>
            <ul>
                <li>Выберите тип ставки и ее размер с помощью ползунка.</li>
                <li>Нажмите "Крутить рулетку", чтобы начать вращение колеса.</li>
                <li>Если цвет/сектор совпадает с вашей ставкой, вы выигрываете согласно коэффициенту.</li>
                <li><strong>Красное/Черное:</strong> коэффициент x2 (ставка возвращается удвоенной).</li>
                <li><strong>Зеленое:</strong> коэффициент x14 (ставка возвращается умноженной на 14).</li>
                <li><strong>Числовые сектора (1-4, 5-8, 9-12):</strong> коэффициент x3.</li>
                <li>Начинайте с 5000 монет. Удачи!</li>
            </ul>
        </section>
        
        <footer>
            <p>Денежная рулетка - виртуальная игра для развлечения. Все выигрыши являются виртуальными.</p>
            <p>© 2023 Денежная Рулетка. Все права защищены.</p>
        </footer>
    </div>

    <script>
        // Игровые переменные
        let balance = 5000;
        let currentBet = 0;
        let selectedBetType = null;
        let isSpinning = false;
        let gameHistory = [];
        
        // Элементы DOM
        const balanceElement = document.getElementById('balance');
        const currentBetElement = document.getElementById('currentBet');
        const betSlider = document.getElementById('betSlider');
        const betValueElement = document.getElementById('betValue');
        const spinButton = document.getElementById('spinButton');
        const wheel = document.getElementById('wheel');
        const resultMessage = document.getElementById('resultMessage');
        const historyList = document.getElementById('historyList');
        const clearHistoryButton = document.getElementById('clearHistory');
        const betOptions = document.querySelectorAll('.bet-option');
        
        // Сектора рулетки с цветами и значениями
        const wheelSectors = [
            { color: '#e74c3c', value: 'красное', number: 1 },   // Красный
            { color: '#2ecc71', value: 'зеленое', number: 2 },   // Зеленый
            { color: '#3498db', value: 'синее', number: 3 },     // Синий
            { color: '#f1c40f', value: 'желтое', number: 4 },    // Желтый
            { color: '#9b59b6', value: 'фиолетовое', number: 5 },// Фиолетовый
            { color: '#1abc9c', value: 'бирюзовое', number: 6 }, // Бирюзовый
            { color: '#e67e22', value: 'оранжевое', number: 7 }, // Оранжевый
            { color: '#e74c3c', value: 'красное', number: 8 },   // Красный
            { color: '#2ecc71', value: 'зеленое', number: 9 },   // Зеленый
            { color: '#3498db', value: 'синее', number: 10 },    // Синий
            { color: '#f1c40f', value: 'желтое', number: 11 },   // Желтый
            { color: '#9b59b6', value: 'фиолетовое', number: 12 } // Фиолетовый
        ];
        
        // Коэффициенты выплат для разных типов ставок
        const payoutMultipliers = {
            'красное': 2,
            'зеленое': 14,
            'черное': 2,
            'синее': 2,
            'желтое': 2,
            'фиолетовое': 2,
            'бирюзовое': 2,
            'оранжевое': 2,
            '1-4': 3,
            '5-8': 3,
            '9-12': 3
        };
        
        // Инициализация игры
        function initGame() {
            updateUI();
            createWheelNumbers();
            loadGameHistory();
            
            // Обработчики событий
            betSlider.addEventListener('input', updateBetValue);
            spinButton.addEventListener('click', spinRoulette);
            clearHistoryButton.addEventListener('click', clearHistory);
            
            // Обработчики для кнопок ставок
            betOptions.forEach(option => {
                option.addEventListener('click', function() {
                    if (isSpinning) return;
                    
                    // Убрать активный класс со всех кнопок
                    betOptions.forEach(opt => opt.classList.remove('active'));
                    
                    // Добавить активный класс к выбранной кнопке
                    this.classList.add('active');
                    
                    // Установить выбранный тип ставки
                    selectedBetType = this.querySelector('span').textContent.toLowerCase();
                    
                    // Установить минимальную ставку для выбранного типа
                    currentBet = parseInt(betSlider.value);
                    updateUI();
                });
            });
            
            // Выбрать первую ставку по умолчанию
            betOptions[0].click();
        }
        
        // Создание номеров на колесе рулетки
        function createWheelNumbers() {
            const wheelNumbers = document.createElement('div');
            wheelNumbers.className = 'wheel-numbers';
            
            for (let i = 0; i < wheelSectors.length; i++) {
                const angle = (i * 30) - 15; // Смещение на половину сектора
                const radian = angle * Math.PI / 180;
                const radius = 120;
                
                const numberElement = document.createElement('div');
                numberElement.className = 'wheel-number';
                numberElement.textContent = wheelSectors[i].number;
                numberElement.style.color = wheelSectors[i].color === '#e74c3c' ? 'white' : 'black';
                numberElement.style.left = `${150 + Math.cos(radian) * radius}px`;
                numberElement.style.top = `${150 + Math.sin(radian) * radius}px`;
                numberElement.style.transform = `rotate(${angle + 90}deg)`;
                
                wheelNumbers.appendChild(numberElement);
            }
            
            wheel.appendChild(wheelNumbers);
        }
        
        // Обновление значения ставки
        function updateBetValue() {
            const bet = parseInt(betSlider.value);
            betValueElement.textContent = bet;
            currentBet = bet;
            updateUI();
        }
        
        // Вращение рулетки
        function spinRoulette() {
            // Проверка условий для начала вращения
            if (isSpinning) return;
            if (selectedBetType === null) {
                resultMessage.textContent = 'Выберите тип ставки!';
                resultMessage.style.color = '#e74c3c';
                return;
            }
            if (currentBet > balance) {
                resultMessage.textContent = 'Недостаточно средств на балансе!';
                resultMessage.style.color = '#e74c3c';
                return;
            }
            if (currentBet <= 0) {
                resultMessage.textContent = 'Сделайте ставку!';
                resultMessage.style.color = '#e74c3c';
                return;
            }
            
            // Начинаем вращение
            isSpinning = true;
            spinButton.disabled = true;
            balance -= currentBet;
            updateUI();
            
            // Случайный выбор сектора
            const randomSectorIndex = Math.floor(Math.random() * wheelSectors.length);
            const winningSector = wheelSectors[randomSectorIndex];
            
            // Вычисление угла поворота (720° + смещение до выигрышного сектора)
            const sectorAngle = 30; // 360° / 12 секторов
            const spinAngle = 720 + (randomSectorIndex * sectorAngle) + Math.random() * sectorAngle;
            
            // Вращение колеса
            wheel.style.transform = `rotate(${spinAngle}deg)`;
            
            // Определение результата после завершения вращения
            setTimeout(() => {
                isSpinning = false;
                spinButton.disabled = false;
                
                // Определение выигрыша
                const winAmount = calculateWin(selectedBetType, winningSector, currentBet);
                const isWin = winAmount > 0;
                
                // Обновление баланса
                balance += winAmount;
                
                // Сохранение в историю
                const historyItem = {
                    type: selectedBetType,
                    bet: currentBet,
                    result: winningSector.value,
                    win: winAmount,
                    isWin: isWin,
                    timestamp: new Date().toLocaleTimeString()
                };
                
                gameHistory.unshift(historyItem);
                if (gameHistory.length > 10) gameHistory.pop();
                
                saveGameHistory();
                updateUI();
                updateHistoryDisplay();
                
                // Показать результат
                if (isWin) {
                    resultMessage.textContent = `Поздравляем! Вы выиграли ${winAmount} монет! Выпало: ${winningSector.value} (${winningSector.number})`;
                    resultMessage.style.color = '#2ecc71';
                } else {
                    resultMessage.textContent = `К сожалению, вы проиграли ${currentBet} монет. Выпало: ${winningSector.value} (${winningSector.number})`;
                    resultMessage.style.color = '#e74c3c';
                }
                
                // Сброс ставки через 3 секунды
                setTimeout(() => {
                    currentBet = parseInt(betSlider.value);
                    updateUI();
                }, 3000);
                
            }, 3000); // Время должно совпадать с длительностью CSS-перехода
        }
        
        // Расчет выигрыша
        function calculateWin(betType, winningSector, betAmount) {
            // Для числовых диапазонов
            if (betType === '1-4') {
                return (winningSector.number >= 1 && winningSector.number <= 4) ? betAmount * payoutMultipliers[betType] : 0;
            }
            if (betType === '5-8') {
                return (winningSector.number >= 5 && winningSector.number <= 8) ? betAmount * payoutMultipliers[betType] : 0;
            }
            if (betType === '9-12') {
                return (winningSector.number >= 9 && winningSector.number <= 12) ? betAmount * payoutMultipliers[betType] : 0;
            }
            
            // Для цветов
            if (betType === 'красное') {
                return winningSector.color === '#e74c3c' ? betAmount * payoutMultipliers[betType] : 0;
            }
            if (betType === 'зеленое') {
                return winningSector.color === '#2ecc71' ? betAmount * payoutMultipliers[betType] : 0;
            }
            if (betType === 'черное') {
                // В нашей рулетке нет черного цвета, так что это просто пример
                // В реальной игре здесь была бы проверка на черный цвет
                return Math.random() > 0.5 ? betAmount * payoutMultipliers[betType] : 0;
            }
            
            return 0;
        }
        
        // Обновление интерфейса
        function updateUI() {
            balanceElement.textContent = balance;
            currentBetElement.textContent = currentBet;
            
            // Обновление состояния кнопки спина
            if (isSpinning || selectedBetType === null || currentBet > balance || currentBet <= 0) {
                spinButton.disabled = true;
            } else {
                spinButton.disabled = false;
            }
        }
        
        // Обновление истории игр
        function updateHistoryDisplay() {
            historyList.innerHTML = '';
            
            gameHistory.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = `history-item ${item.isWin ? 'win' : 'loss'}`;
                historyItem.innerHTML = `
                    <div>${item.type}</div>
                    <div>${item.bet} → ${item.win > 0 ? '+' + item.win : 0}</div>
                    <div style="font-size:0.8rem;color:#b8c1cc">${item.timestamp}</div>
                `;
                historyList.appendChild(historyItem);
            });
        }
        
        // Сохранение истории в localStorage
        function saveGameHistory() {
            localStorage.setItem('rouletteHistory', JSON.stringify(gameHistory));
            localStorage.setItem('rouletteBalance', balance);
        }
        
        // Загрузка истории из localStorage
        function loadGameHistory() {
            const savedHistory = localStorage.getItem('rouletteHistory');
            const savedBalance = localStorage.getItem('rouletteBalance');
            
            if (savedHistory) {
                gameHistory = JSON.parse(savedHistory);
            }
            
            if (savedBalance) {
                balance = parseInt(savedBalance);
            }
            
            updateHistoryDisplay();
        }
        
        // Очистка истории
        function clearHistory() {
            gameHistory = [];
            updateHistoryDisplay();
            saveGameHistory();
        }
        
        // Инициализация игры при загрузке страницы
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
